---
ms.assetid: d7a4d2e1-217d-4ffc-93f0-817149bd9e7f
title: Voies de compromis
description: ''
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adds
ms.openlocfilehash: 65275f4fc2717fdf9bf85ad2aa31eb12d318cc9f
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/27/2019
ms.locfileid: "71367705"
---
# <a name="avenues-to-compromise"></a>Voies de compromis

>S’applique à : Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

*Numéro de loi sept : le réseau le plus sécurisé est un réseau bien administré.* - [10 lois immuables de l’administration de la sécurité](https://technet.microsoft.com/library/cc722488.aspx)  
  
Dans les organisations qui ont rencontré des événements de compromission catastrophique, les évaluations révèlent généralement que les organisations ont une visibilité limitée de l’état réel de leurs infrastructures informatiques, ce qui peut être très différent de leur « documenté » déclare. Ces écarts introduisent des vulnérabilités qui exposent l’environnement à la compromission, souvent avec un faible risque de découverte jusqu’à ce que la compromission ait progressé jusqu’au point auquel les attaquants « possèdent » efficacement l’environnement.  
  
Les évaluations détaillées de la configuration AD DS, des infrastructures à clé publique (PKI), des serveurs, des stations de travail, des applications, des listes de contrôle d’accès (ACL) et d’autres technologies révèlent des problèmes de configuration et de vulnérabilités qui, si corrigé, peut avoir empêché la compromission initiale.  
  
L’analyse de la documentation, des processus et des procédures informatiques identifie les vulnérabilités introduites par des lacunes dans les pratiques administratives qui ont été exploitées par des attaquants pour obtenir des privilèges qui ont été utilisés pour compromettre complètement la forêt Active Directory. Une forêt entièrement compromise est une forêt dans laquelle les attaquants compromettent non seulement des systèmes, des applications ou des comptes d’utilisateurs individuels, mais réaffectent leur accès afin d’obtenir un niveau de privilège dans lequel ils peuvent modifier ou détruire tous les aspects de la forêt. Lorsqu’une installation Active Directory a été compromise dans ce degré, les attaquants peuvent apporter des modifications qui leur permettent de maintenir une présence dans l’environnement, ou pire, pour détruire l’annuaire et les systèmes et les comptes qu’il gère.  
  
Bien qu’un certain nombre de vulnérabilités couramment exploitées dans les descriptions ci-après ne soient pas des attaques contre les Active Directory, elles permettent aux attaquants d’établir une brèche dans un environnement qui peut être utilisé pour exécuter l’escalade de privilèges (également appelée privilège). élévation) et pour cibler et compromettre AD DS.  
  
Cette section de ce document se concentre sur la description des mécanismes que les attaquants utilisent généralement pour accéder à l’infrastructure et éventuellement lancer des attaques d’élévation de privilèges. Consultez également les sections suivantes :  
  
-   [Réduction de la surface d’attaque Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md) Recommandations détaillées pour la configuration sécurisée de Active Directory.  
  
-   [Surveillance des Active Directory pour les signes de compromission](../../../ad-ds/plan/security-best-practices/Monitoring-Active-Directory-for-Signs-of-Compromise.md) Recommandations pour aider à détecter la compromission  
  
-   [Planification de la compromission](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) Approches de haut niveau pour vous aider à préparer les attaques contre l’infrastructure à partir de perspectives informatiques et professionnelles  
  
> [!NOTE]  
> Bien que ce document se concentre sur les systèmes Active Directory et Windows qui font partie d’un domaine AD DS, les attaquants se focalisent rarement uniquement sur Active Directory et Windows. Dans les environnements qui combinent des systèmes d’exploitation, des répertoires, des applications et des référentiels de données, il est courant de constater que les systèmes non-Windows ont également été compromis. Cela est particulièrement vrai si les systèmes fournissent un « pont » entre des environnements Windows et non-Windows, tels que des serveurs de fichiers accessibles par des clients Windows et UNIX ou Linux, des répertoires qui fournissent des services d’authentification à plusieurs systèmes d’exploitation, ou les méta-répertoires qui synchronisent les données entre des répertoires disparates.  
>   
> AD DS est ciblée en raison des fonctionnalités de gestion de la configuration et de l’accès centralisées qu’il fournit non seulement aux systèmes Windows, mais aussi aux autres clients. Les autres répertoires ou applications qui fournissent des services d’authentification et de gestion de la configuration peuvent et seront ciblés par des attaquants déterminés. Bien que ce document soit axé sur des protections qui peuvent réduire la probabilité d’une compromission des installations Active Directory, toute organisation qui comprend des ordinateurs, des répertoires, des applications ou des référentiels de données non-Windows doit également se préparer à attaques contre ces systèmes.  
  
## <a name="initial-breach-targets"></a>Cibles de violations initiales  
Personne ne crée intentionnellement une infrastructure informatique qui expose l’organisation à compromettre. Lorsqu’une forêt Active Directory est construite pour la première fois, elle est généralement initiale et actuelle. À mesure que les années et les systèmes d’exploitation et les nouvelles applications sont acquis, ils sont ajoutés à la forêt. À mesure que les avantages de la facilité de gestion fournis par Active Directory sont reconnus, de plus en plus de contenu sont ajoutés à l’annuaire, d’autres personnes intègrent leurs ordinateurs ou applications avec AD DS, et les domaines sont mis à niveau pour prendre en charge les nouvelles fonctionnalités offertes par le plus versions actuelles du système d’exploitation Windows. Ce qui se passe également dans le temps, cependant, c’est que même en cas d’ajout d’une nouvelle infrastructure, les autres parties de l’infrastructure peuvent ne pas être conservées, ainsi que les systèmes et les applications qui fonctionnent correctement et ne reçoivent donc pas attention et les organisations commencent à oublier qu’elles n’ont pas éliminé leur infrastructure héritée. En fonction de ce que nous voyons dans l’évaluation des infrastructures compromises, la plus ancienne, la plus grande et la plus complexe de l’environnement, plus il est probable qu’il existe de nombreuses instances de vulnérabilités couramment exploitées.  
  
Quelle que soit la motivation de la personne malveillante, la plupart des violations de la sécurité des informations commencent avec la compromission d’un ou deux systèmes à la fois. Ces événements initiaux, ou points d’entrée dans le réseau, exploitent souvent les vulnérabilités qui auraient pu être résolues, mais pas. Le [DBIR (2012)](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), qui est une étude annuelle produite par l’équipe de risque de Verizon en collaboration avec un certain nombre d’agences de sécurité nationales et d’autres sociétés, déclare que 96% des attaques n’étaient pas très difficiles, et que « 97% des violations étaient évitables par le biais de contrôles simples ou intermédiaires. » Ces résultats peuvent être une conséquence directe des vulnérabilités couramment exploitées qui suivent.  
  
### <a name="gaps-in-antivirus-and-antimalware-deployments"></a>Lacunes dans les déploiements antivirus et anti-programme malveillant  
*Numéro de loi huit : un scanneur de logiciels malveillants obsolète n’est guère mieux qu’un seul scanneur.* - [dix lois immuables de sécurité (Version 2,0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
L’analyse des déploiements antivirus et anti-programme malveillant de l’organisation révèle souvent un environnement dans lequel la plupart des stations de travail sont configurées avec un logiciel antivirus et un logiciel anti-programme malveillant activé et à jour. Les exceptions sont généralement des stations de travail qui se connectent rarement à l’environnement d’entreprise ou aux appareils employés pour lesquels un logiciel antivirus et anti-programme malveillant peut être difficile à déployer, à configurer et à mettre à jour.  
  
Toutefois, les populations de serveurs ont tendance à être moins constamment protégées dans de nombreux environnements compromis. Comme indiqué dans les [enquêtes de violations de données 2012](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), 94% de toutes les compromissions de données impliquaient des serveurs, ce qui représente une augmentation de 18% par rapport à l’année précédente et 69% des attaques incorporées par des programmes malveillants. Dans les populations de serveurs, il n’est pas rare de constater que les installations antivirus et anti-programmes malveillants sont configurées de manière incohérente, obsolètes, mal configurées ou même désactivées. Dans certains cas, le logiciel antivirus et anti-programme malveillant est désactivé par le personnel administratif, mais dans d’autres cas, les attaquants désactivent le logiciel après avoir compromis un serveur par d’autres vulnérabilités. Lorsque l’antivirus et le logiciel anti-programme malveillant sont désactivés, les attaquants complantent les logiciels malveillants sur le serveur et se concentrent sur la propagation de la compromission sur la population du serveur.  
  
Il est important non seulement de vous assurer que vos systèmes sont protégés par une protection complète et complète contre les programmes malveillants, mais également de surveiller les systèmes de désactivation ou de suppression des logiciels antivirus et anti-programme malveillant et de redémarrer automatiquement la protection lorsqu’elle est désactivée manuellement. Bien qu’aucun logiciel antivirus et anti-programme malveillant ne puisse garantir la prévention et la détection de toutes les infections, une mise en œuvre d’antivirus et de logiciels anti-programmes malveillants correctement configurés et déployés peut réduire la probabilité d’infection.  
  
### <a name="incomplete-patching"></a>Mise à jour corrective incomplète  
*Loi n ° 3 : Si vous ne suivez pas les correctifs de sécurité, votre réseau ne vous sera pas à votre la longue.* - [10 lois immuables de l’administration de la sécurité](https://technet.microsoft.com/library/cc722488.aspx)  
  
Microsoft publie les bulletins de sécurité le deuxième mardi de chaque mois, même si, dans de rares occasions, les mises à jour de sécurité sont publiées entre les mises à jour de sécurité mensuelles (celles-ci sont également appelées « mises à jour hors bande ») lorsque la vulnérabilité est déterminée à poser un risque urgent pour les systèmes clients. Si une petite entreprise configure ses ordinateurs Windows pour utiliser Windows Update pour gérer les mises à jour correctives du système et des applications, ou si une grande organisation utilise un logiciel de gestion tel que System Center Configuration Manager (SCCM) pour déployer les correctifs conformément aux plans hiérarchiques, de nombreux clients corrigent leurs infrastructures Windows de manière relativement opportune.  
  
Toutefois, peu d’infrastructures incluent uniquement des ordinateurs Windows et des applications Microsoft, et dans des environnements compromis, il est courant de trouver que la stratégie de gestion des correctifs de l’organisation contient des lacunes. Les systèmes Windows dans ces environnements sont corrigés de manière incohérente. Les systèmes d’exploitation autres que Windows sont corrigés de façon sporadique, si ce n’est le cas. Les applications commerciales prêtes à l’emploi (COTS) contiennent des vulnérabilités pour lesquelles des correctifs existent, mais qui n’ont pas été appliqués. Les périphériques réseau sont souvent configurés avec les informations d’identification par défaut de l’usine et aucune mise à jour du microprogramme après leur installation. Les applications et les systèmes d’exploitation qui ne sont plus pris en charge par leurs fournisseurs sont souvent maintenus en cours d’exécution, bien qu’ils ne puissent plus être corrigés contre les vulnérabilités. Chacun de ces systèmes non corrigés représente un autre point d’entrée potentiel pour les attaquants.  
  
La « consumérisation » de l’informatique a introduit des défis supplémentaires dans le fait que les appareils appartenant aux employés sont utilisés pour accéder aux données de l’entreprise, et que l’organisation peut avoir peu de contrôle sur la mise à jour corrective et la configuration des appareils personnels des employés. Le matériel d’entreprise est généralement fourni avec des options de configuration et des fonctionnalités de gestion adaptées à l’entreprise, ce qui réduit le choix de la personnalisation et de la sélection des appareils. Le matériel dédié aux employés offre un éventail plus large de fabricants, de fournisseurs, de fonctionnalités de sécurité matérielle, de fonctionnalités de sécurité logicielles, de fonctionnalités de gestion et d’options de configuration, et de nombreuses fonctionnalités d’entreprise peuvent être absentes.  
  
#### <a name="patch-and-vulnerability-management-software"></a>Logiciel de gestion des correctifs et des vulnérabilités  
Si un système de gestion des correctifs efficace est en place pour les systèmes Windows et les applications Microsoft, une partie de la surface d’attaque à laquelle les vulnérabilités non corrigées créent a été résolue. Toutefois, à moins que les systèmes non Windows, les applications non-Microsoft, l’infrastructure réseau et les appareils employés soient également tenus à jour sur les correctifs et autres correctifs, l’infrastructure reste vulnérable. Dans certains cas, le fournisseur d’une application peut proposer des fonctionnalités de mise à jour automatique ; dans d’autres cas, il peut être nécessaire de concevoir une approche pour récupérer et appliquer régulièrement des correctifs et d’autres correctifs.
  
### <a name="outdated-applications-and-operating-systems"></a>Applications et systèmes d’exploitation obsolètes  
*« Vous ne pouvez pas vous attendre à un système d’exploitation de six ans pour vous protéger contre une attaque de six mois. »* -Information Security Professional avec 10 ans d’expérience dans la sécurisation des installations d’entreprise  
  
Bien que « obtenir en cours, rester en cours » peut sembler une expression marketing, les systèmes d’exploitation et les applications obsolètes créent des risques pour les infrastructures informatiques de nombreuses organisations. Un système d’exploitation qui a été publié dans 2003 peut toujours être pris en charge par le fournisseur et fourni avec des mises à jour pour résoudre les vulnérabilités, mais il est possible que le système d’exploitation ne contienne pas de fonctionnalités de sécurité ajoutées dans les versions plus récentes du système d’exploitation. Les systèmes obsolètes peuvent même exiger l’affaiblissement de certaines configurations de sécurité AD DS pour prendre en charge les fonctionnalités moins puissantes de ces ordinateurs.  
  
Généralement, les applications qui ont été écrites pour utiliser des protocoles d’authentification hérités par des fournisseurs qui ne prennent plus en charge l’application ne peuvent pas être réutilisées pour prendre en charge des mécanismes d’authentification plus forts. Toutefois, le domaine de Active Directory d’une organisation peut toujours être configuré pour stocker les hachages LAN Manager ou les mots de passe chiffrés de manière réversible pour prendre en charge ces applications. Les applications écrites avant l’introduction de systèmes d’exploitation plus récents peuvent ne pas fonctionner correctement ou sur le système d’exploitation actuel, ce qui nécessite que les organisations maintiennent des systèmes anciens et anciens, et dans certains cas, du matériel et des logiciels totalement non pris en charge.  
  
Même dans les cas où les organisations ont mis à jour leurs contrôleurs de domaine vers Windows Server 2012, Windows Server 2008 R2 ou Windows Server 2008, il est courant de trouver des parties significatives de la population des serveurs membres qui exécutent Windows Server 2003, Windows 2000 serveur ou Windows NT Server 4,0 (qui ne sont pas pris en charge). Plus une organisation gère des systèmes vieillissants, plus la disparité entre les ensembles de fonctionnalités augmente et plus il est probable que les systèmes de production ne seront plus pris en charge. En outre, plus une forêt de Active Directory est conservée, plus nous observons que les systèmes et les applications hérités sont manquants dans les plans de mise à niveau. Cela peut signifier qu’un seul ordinateur exécutant une seule application peut introduire des vulnérabilités à l’ensemble du domaine ou de la forêt, car Active Directory est configuré pour prendre en charge ses protocoles hérités et mécanismes d’authentification.  
  
Pour éliminer les systèmes et les applications hérités, vous devez tout d’abord vous concentrer sur leur identification et leur catalogage, puis déterminer s’il faut mettre à niveau ou remplacer l’application ou l’hôte. Même s’il peut être difficile de trouver des remplacements pour des applications hautement spécialisées pour lesquelles il n’existe ni prise en charge ni chemin de mise à niveau, vous pouvez tirer parti d’un concept appelé « destruction créative » pour remplacer l’application héritée par une nouvelle application. qui fournit les fonctionnalités nécessaires. La [planification de la compromission](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) est décrite plus en détail dans la section « planification de la compromission », plus loin dans ce document.  
  
### <a name="misconfiguration"></a>Configuration incorrecte  
*Loi n ° 4 : il n’y a pas grand-chose à installer des correctifs de sécurité sur un ordinateur qui n’a jamais été sécurisé pour commencer.* - [10 lois immuables de l’administration de la sécurité](https://technet.microsoft.com/library/cc722488.aspx)  
  
Même dans les environnements où les systèmes sont généralement mis à jour et corrigés, nous identifions généralement les lacunes ou les configurations incorrectes dans le système d’exploitation, les applications s’exécutant sur les ordinateurs et les Active Directory. Certaines insertions de configuration exposent uniquement l’ordinateur local à la compromission, mais une fois qu’un ordinateur est « détenu », les attaquants se concentrent généralement sur la propagation de la compromission sur d’autres systèmes et finissent par Active Directory. Voici quelques-uns des domaines courants dans lesquels nous identifions les configurations qui présentent un risque.  
  
#### <a name="in-active-directory"></a>Dans Active Directory  
Les comptes de Active Directory qui sont le plus souvent ciblés par des attaquants sont ceux qui sont membres des groupes les plus privilégiés, tels que les membres des groupes Admins du domaine (DA), administrateurs de l’entreprise (EA) ou administrateurs intégrés (BA) dans Active Directory. L’appartenance à ces groupes doit être réduite au plus petit nombre de comptes possible pour que la surface d’attaque de ces groupes soit limitée. Il est même possible d’éliminer l’appartenance « permanente » dans ces groupes privilégiés ; en d’autres termes, vous pouvez implémenter des paramètres qui vous permettent de remplir temporairement ces groupes uniquement lorsque leurs privilèges au niveau du domaine et de la forêt sont nécessaires. Quand des comptes à privilèges élevés sont utilisés, ils doivent être utilisés uniquement sur des systèmes désignés et sécurisés, tels que des contrôleurs de domaine ou des hôtes d’administration sécurisés. Des informations détaillées pour aider à implémenter toutes ces configurations sont fournies dans [réduction de la surface d’attaque Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md).  
  
Lorsque nous évaluons l’appartenance des groupes avec privilèges les plus élevés dans Active Directory, nous trouvons généralement une appartenance excessive aux trois groupes les plus privilégiés. Dans certains cas, les organisations ont des dizaines, voire des centaines de comptes dans les groupes DA. Dans d’autres cas, les organisations placent les comptes directement dans des groupes d’administrateurs intégrés, en pensant que le groupe est « moins privilégié » que le groupe DAs. Ce n’est pas le fait. Nous trouvons souvent des membres permanents du groupe EA dans le domaine racine de forêt, malgré le fait que les privilèges EA sont rarement et temporairement requis. La recherche du compte d’administrateur quotidien d’un utilisateur informatique dans les trois groupes est également courante, même s’il s’agit d’une configuration réellement redondante. Comme décrit dans [réduction de la surface d’attaque Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md), si un compte est un membre permanent de l’un de ces groupes ou tous, le compte peut être utilisé pour compromettre et même détruire l’environnement AD DS et les systèmes et comptes gérés par celui-ci. Des recommandations pour la configuration sécurisée et l’utilisation de comptes privilégiés dans Active Directory sont fournies dans [la réduction de la surface d’attaque Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md).  
  
#### <a name="on-domain-controllers"></a>Sur les contrôleurs de domaine  
Lorsque nous évaluons les contrôleurs de domaine, nous les trouvons souvent configurés et gérés de la même façon que les serveurs membres. Les contrôleurs de domaine exécutent parfois les mêmes applications et utilitaires que ceux installés sur les serveurs membres, et non parce qu’ils sont nécessaires sur les contrôleurs de domaine, mais parce que les applications font partie d’une build standard. Ces applications peuvent offrir des fonctionnalités minimales sur les contrôleurs de domaine, mais elles s’ajoutent beaucoup à la surface d’attaque en exigeant un paramètre de configuration qui ouvre les ports, crée des comptes de service à privilèges élevés ou accorde l’accès au système par les utilisateurs qui ne doit pas se connecter à un contrôleur de domaine à d’autres fins que l’authentification et stratégie de groupe application. Dans certaines brèches, les attaquants ont utilisé des outils déjà installés sur les contrôleurs de domaine pour accéder aux contrôleurs de domaine, mais pour modifier ou endommager la base de données AD DS.  
  
Lorsque nous extrayons les paramètres de configuration d’Internet Explorer sur les contrôleurs de domaine, nous constatons que les utilisateurs se sont connectés avec des comptes disposant de hauts niveaux de privilèges dans Active Directory et ont utilisé les comptes pour accéder à Internet et à l’intranet à partir du domaine. secondaires. Dans certains cas, les comptes ont configuré les paramètres d’Internet Explorer sur les contrôleurs de domaine pour autoriser le téléchargement de contenu Internet et les utilitaires gratuits ont été téléchargés à partir de sites Internet et installés sur les contrôleurs de domaine. La configuration de sécurité renforcée d’Internet Explorer est activée par défaut pour les utilisateurs et les administrateurs, mais nous observons souvent que a été désactivé pour les administrateurs. Lorsqu’un compte doté de privilèges élevés accède à Internet et télécharge du contenu sur n’importe quel ordinateur, cet ordinateur est exposé à des risques graves. Lorsque l’ordinateur est un contrôleur de domaine, la totalité de la AD DS installation est exposée à un risque.  
  
##### <a name="protecting-domain-controllers"></a>Protection des contrôleurs de domaine  
Les contrôleurs de domaine doivent être traités comme des composants d’infrastructure critiques, sécurisés et configurés de manière plus stricte que les serveurs de fichiers, d’impression et d’applications. Les contrôleurs de domaine ne doivent pas exécuter de logiciels qui ne sont pas nécessaires au contrôleur de domaine pour fonctionner ou ne protègent pas le contrôleur de domaine contre les attaques. Les contrôleurs de domaine ne doivent pas être autorisés à accéder à Internet et les paramètres de sécurité doivent être configurés et appliqués par stratégie de groupe objets (GPO). Des recommandations détaillées pour l’installation, la configuration et la gestion sécurisées des contrôleurs de domaine sont fournies dans [sécurisation des contrôleurs de domaine contre les attaques](../../../ad-ds/plan/security-best-practices/Securing-Domain-Controllers-Against-Attack.md).  
  
#### <a name="within-the-operating-system"></a>Au sein du système d’exploitation  
*Loi n ° 2 : si une personne malintentionnée peut modifier le système d’exploitation sur votre ordinateur, ce n’est plus votre ordinateur.* - [dix lois immuables de sécurité (Version 2,0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Bien que certaines organisations créent des configurations de base pour des serveurs de types différents et autorisent une personnalisation limitée du système d’exploitation après son installation, l’analyse des environnements compromis permet souvent de découvrir un grand nombre de serveurs déployés dans un mode ad hoc et configurés manuellement et indépendamment. Les configurations entre deux serveurs qui exécutent la même fonction peuvent être complètement différentes, où aucun serveur n’est configuré en toute sécurité. À l’inverse, les lignes de base de configuration de serveur peuvent être appliquées de manière cohérente, mais également mal configurées ; autrement dit, les serveurs sont configurés de manière à créer la même vulnérabilité sur tous les serveurs d’un type donné. Une configuration insuffisante comprend des pratiques telles que la désactivation des fonctionnalités de sécurité, l’octroi de droits et d’autorisations excessifs aux comptes (notamment les comptes de service), l’utilisation d’informations d’identification locales identiques sur les systèmes et l’autorisation de l’installation de applications et utilitaires non autorisés qui créent leurs propres vulnérabilités.  
  
##### <a name="disabling-security-features"></a>Désactivation des fonctionnalités de sécurité  
Les organisations désactivent parfois le pare-feu Windows avec fonctions avancées de sécurité (WFAS), car WFAS est difficile à configurer ou nécessite une configuration nécessitant beaucoup de travail. Toutefois, à compter de Windows Server 2008, lorsqu’un rôle ou une fonctionnalité est installé sur un serveur, il est configuré par défaut avec le minimum de privilèges requis pour que le rôle ou la fonctionnalité fonctionne, et le pare-feu Windows est configuré automatiquement pour prendre en charge le rôle. ou fonctionnalité. En désactivant WFAS (et en n’utilisant pas un autre pare-feu basé sur l’hôte), les organisations augmentent la surface d’attaque de l’ensemble de l’environnement Windows. Les pare-feu de périmètre fournissent une protection contre les attaques qui ciblent directement un environnement à partir d’Internet, mais ils ne fournissent aucune protection contre les attaques qui exploitent d’autres vecteurs d’attaque tels que les attaques [par téléchargement par téléchargement](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) , ou les attaques qui proviennent d’autres systèmes compromis sur l’intranet.  
  
Les paramètres de contrôle de compte d’utilisateur (UAC) sont parfois désactivés sur les serveurs, car le personnel administratif trouve les invites indiscrètes. Bien que [support Microsoft article 2526083](https://support.microsoft.com/kb/2526083) décrit les scénarios dans lesquels le contrôle de compte d’utilisateur peut être désactivé sur Windows Server, à moins que vous n’exécutiez une installation Server Core (où le contrôle de compte d’utilisateur est désactivé par conception), vous ne devez pas désactiver le contrôle de compte d’utilisateur sur les serveurs sans examen minutieux et recherche.  
  
Dans d’autres cas, les paramètres de serveur sont configurés sur des valeurs moins sécurisées, car les organisations appliquent des paramètres de configuration de serveur obsolètes à de nouveaux systèmes d’exploitation, tels que l’application de lignes de base Windows Server 2003 aux ordinateurs exécutant Windows Server 2012, Windows Server 2008 R2 ou Windows Server 2008, sans modifier les lignes de base pour refléter les modifications apportées au système d’exploitation. Au lieu de transporter les anciennes lignes de base des serveurs aux nouveaux systèmes d’exploitation, lors du déploiement d’un nouveau système d’exploitation, passez en revue les paramètres de configuration et les modifications de sécurité pour vous assurer que les paramètres implémentés sont applicables et appropriés pour le nouveau système d’exploitation.  
  
##### <a name="granting-excessive-privilege"></a>Octroi d’un privilège excessif  
Dans presque tous les environnements que nous avons évalués, des privilèges excessifs sont accordés aux comptes locaux et basés sur un domaine sur les systèmes Windows. Les utilisateurs bénéficient de droits d’administrateur local sur leurs stations de travail, les serveurs membres exécutent des services qui sont configurés avec des droits au-delà de ce dont ils ont besoin pour fonctionner, tandis que les groupes Administrateurs locaux sur la population du serveur contiennent des dizaines, voire des centaines de comptes locaux et de domaine. La compromission d’un seul compte privilégié sur un ordinateur permet aux attaquants de compromettre les comptes de tous les utilisateurs et services qui se connectent à l’ordinateur, ainsi que de collecter et de tirer parti des informations d’identification pour propager le compromis vers d’autres systèmes.  
  
Bien que les attaques Pass-The-hash (PTH) et autres vols d’informations d’identification soient omniprésentes aujourd’hui, cela est dû au fait qu’il existe des outils librement disponibles qui facilitent l’extraction des informations d’identification d’autres comptes privilégiés lorsqu’un pirate a obtenu l’administrateur. ou un accès au niveau système à un ordinateur. Même sans outils permettant de collecter des informations d’identification à partir de sessions de connexion, une personne malveillante disposant d’un accès privilégié à un ordinateur peut tout aussi facilement installer des enregistreurs de frappe qui capturent les séquences de touches, les captures d’écran et le contenu du presse-papiers. Une personne malveillante disposant d’un accès privilégié à un ordinateur peut désactiver le logiciel anti-programme malveillant, installer les rootkits, modifier les fichiers protégés ou installer des logiciels malveillants sur l’ordinateur qui automatisent les attaques ou transforment un serveur en hôte de [téléchargement par lecteur](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) .  
  
Les tactiques utilisées pour étendre une violation au-delà d’un seul ordinateur varient, mais la clé de propagation de la compromission est l’acquisition d’un accès hautement privilégié à des systèmes supplémentaires. En réduisant le nombre de comptes disposant d’un accès privilégié à n’importe quel système, vous réduisez la surface d’attaque non seulement de cet ordinateur, mais la probabilité qu’un attaquant récolte des informations d’identification précieuses à partir de l’ordinateur.  
  
##### <a name="standardizing-local-administrator-credentials"></a>Normalisation des informations d’identification de l’administrateur local  
Il y a longtemps été discuté entre les spécialistes de la sécurité et la nécessité de renommer les comptes administrateur local sur les ordinateurs Windows. Ce qui est réellement important sur les comptes d’administrateur local, c’est qu’ils sont configurés avec le même nom d’utilisateur et le même mot de passe sur plusieurs ordinateurs.  
  
Si le compte d’administrateur local porte la même valeur sur plusieurs serveurs et que le mot de passe attribué au compte est également configuré sur la même valeur, des attaquants peuvent extraire les informations d’identification du compte sur un ordinateur sur lequel l’administrateur ou l’accès au niveau du système a été obtenu. La personne malveillante n’a pas à compromettre initialement le compte d’administrateur ; ils doivent uniquement compromettre le compte d’un utilisateur qui est membre du groupe Administrateurs local ou d’un compte de service configuré pour s’exécuter en tant que LocalSystem ou avec des privilèges d’administrateur. L’attaquant peut ensuite extraire les informations d’identification du compte administrateur et relire ces informations d’identification dans les ouvertures de session réseau sur d’autres ordinateurs du réseau.  
  
Tant qu’un autre ordinateur possède un compte local avec les mêmes nom d’utilisateur et mot de passe (ou hachage de mot de passe) que les informations d’identification de compte présentées, la tentative de connexion réussit et l’attaquant obtient un accès privilégié à l’ordinateur ciblé. Dans les versions actuelles de Windows, le compte administrateur intégré est [désactivé par défaut](https://technet.microsoft.com/library/cc753450.aspx), mais dans les systèmes d’exploitation existants, le compte est activé par défaut.  
  
> [!NOTE]  
> Certaines organisations ont configuré intentionnellement des comptes d’administrateur local pour qu’ils soient activés en ce qui concerne la « Failsafe » dans le cas où tous les autres comptes privilégiés sont verrouillés sur un système. Toutefois, même si le compte d’administrateur local est désactivé et qu’aucun autre compte n’est disponible pour activer le compte ou ouvrir une session sur le système avec des privilèges d’administrateur, le système peut être démarré en mode sans échec et le compte d’administrateur local intégré peut être réactivé, comme décrit dans [support Microsoft l’article 814777](https://support.microsoft.com/kb/814777). En outre, si le système applique correctement les objets de stratégie de groupe, un objet de stratégie de groupe peut être modifié pour réactiver (temporairement) le compte administrateur, ou des groupes restreints peuvent être configurés pour ajouter un compte basé sur un domaine au groupe Administrateurs local. Les réparations peuvent être effectuées et le compte administrateur peut être de nouveau désactivé. Pour empêcher efficacement un compromis latéral qui utilise des informations d’identification de compte d’administrateur local intégrées, des noms d’utilisateur et des mots de passe uniques doivent être configurés pour les comptes d’administrateur local. Pour déployer des mots de passe uniques pour les comptes d’administrateur local via un objet de stratégie de groupe, consultez [solution pour la gestion du mot de passe du compte administrateur intégré via l’objet de stratégie de groupe](https://technet.microsoft.com/mt227395.aspx) sur TechNet.  
  
##### <a name="permitting-installation-of-unauthorized-applications"></a>Autoriser l’installation d’applications non autorisées  
*Loi numéro un : si une personne malintentionnée peut vous persuader d’exécuter son programme sur votre ordinateur, il ne s’agit pas seulement de votre ordinateur.* - [dix lois immuables de sécurité (Version 2,0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Qu’une organisation déploie des paramètres de ligne de base cohérents entre les serveurs, l’installation d’applications qui ne font pas partie du rôle défini d’un serveur ne doit pas être autorisée. En autorisant l’installation de logiciels qui ne font pas partie des fonctionnalités désignées d’un serveur, les serveurs sont exposés à une installation involontaire ou malveillante de logiciels qui augmente la surface d’attaque du serveur, introduit des failles de l’application ou provoque instabilité du système.  
  
#### <a name="applications"></a>Applications  
Comme décrit précédemment, les applications sont souvent installées et configurées pour utiliser des comptes qui disposent de plus de privilèges que l’application n’en a réellement besoin. Dans certains cas, la documentation de l’application spécifie que les comptes de service doivent être membres du groupe Administrateurs local d’un serveur ou doivent être configurés pour s’exécuter dans le contexte du LocalSystem. Ce n’est pas souvent le cas parce que l’application a besoin de ces droits, mais parce que la détermination des droits et autorisations requis par les comptes de service d’une application nécessite des investissements en temps et en effort supplémentaires. Si une application ne s’installe pas avec les privilèges minimaux requis pour que l’application et ses fonctionnalités configurées fonctionnent, le système est exposé aux attaques qui tirent parti des privilèges d’application sans aucune attaque contre le système d’exploitation lui-même.  
  
### <a name="lack-of-secure-application-development-practices"></a>Absence de pratiques de développement d’applications sécurisées  
L’infrastructure existe pour prendre en charge les charges de travail d’entreprise. Lorsque ces charges de travail sont implémentées dans des applications personnalisées, il est essentiel de s’assurer que les applications sont développées à l’aide des meilleures pratiques sécurisées. L’analyse des causes premières des incidents au niveau de l’entreprise révèle souvent qu’une compromission initiale est réalisée par le biais d’applications personnalisées, en particulier celles qui sont accessibles sur Internet. La plupart de ces compromissions sont réalisées par le biais d’attaques connues, telles que l’injection SQL (SQLi) et les attaques de script entre sites (XSS).  
  
L’injection SQL est une vulnérabilité de l’application qui permet à l’entrée définie par l’utilisateur de modifier une instruction SQL qui est transmise à la base de données en vue de son exécution. Cette entrée peut être fournie par le biais d’un champ dans l’application, d’un paramètre (tel que la chaîne de requête ou un cookie) ou d’autres méthodes. Le résultat de cette injection est que l’instruction SQL fournie à la base de données est fondamentalement différente de ce que le développeur a prévu. Prenons, par exemple, une requête courante utilisée dans l’évaluation d’une combinaison nom d’utilisateur/mot de passe :  
  
`SELECT userID FROM users WHERE username = 'sUserName' AND password = 'sPassword'`  
  
Lorsque cette opération est reçue par le serveur de base de données, elle indique au serveur d’examiner la table Users et de retourner un enregistrement userID dans lequel le nom d’utilisateur et le mot de passe correspondent à ceux fournis par l’utilisateur (vraisemblablement via une forme de connexion quelconque). Naturellement, l’objectif du développeur est de retourner un enregistrement valide uniquement si un nom d’utilisateur et un mot de passe corrects peuvent être fournis par l’utilisateur. Si l’un des deux est incorrect, le serveur de base de données ne pourra pas trouver d’enregistrement correspondant et renverra un résultat vide.  
  
Le problème se produit lorsqu’une personne malveillante effectue une tâche inattendue, par exemple en fournissant son propre SQL à la place de données valides. Étant donné que SQL est interprété à la volée par le serveur de base de données, le code injecté est traité comme si le développeur l’avait fait. Par exemple, si l’attaquant a entré **administrateur** pour l’ID d’utilisateur et **xyz** ou **1 = 1** comme mot de passe, l’instruction résultante traitée par la base de données serait la suivante :  
  
`SELECT userID FROM users WHERE username = 'administrator' AND password = 'xyz' OR 1=1`  
  
Lorsque cette requête est traitée par le serveur de base de données, toutes les lignes de la table sont retournées dans la requête, car 1 = 1 prend toujours la valeur true, ce qui n’a pas d’importance si le nom d’utilisateur et le mot de passe corrects sont connus ou fournis. Dans la plupart des cas, le résultat net est que l’utilisateur se connecte en tant que premier utilisateur de la base de données de l’utilisateur. dans la plupart des cas, il s’agit de l’utilisateur administratif.  
  
Outre la connexion simple, les instructions SQL incorrectement formées peuvent être utilisées pour ajouter, supprimer ou modifier des données, ou même supprimer (supprimer) des tables entières d’une base de données. Dans les cas les plus extrêmes où SQLi est associé à un privilège excessif, les commandes du système d’exploitation peuvent être exécutées pour permettre la création de nouveaux utilisateurs, pour télécharger des outils d’attaque ou pour effectuer d’autres actions que les attaquants choisissent.  
  
Dans les scripts entre sites, la vulnérabilité est introduite dans la sortie de l’application. Une attaque commence par une personne malveillante qui fournit des données incorrectes à l’application, mais dans ce cas, les données incorrectes sont sous la forme d’un code de script (tel que JavaScript) qui est exécuté par le navigateur de la victime. L’exploitation d’une vulnérabilité XSS peut permettre à une personne malveillante d’exécuter n’importe quelle fonction de l’application cible dans le contexte de l’utilisateur qui a lancé le navigateur. Les attaques XSS sont généralement initiées par un e-mail de hameçonnage qui encourage l’utilisateur à cliquer sur un lien qui se connecte à l’application et à exécuter le code d’attaque.  
  
XSS est souvent exploité dans les scénarios de transactions en ligne et de commerce électronique où une personne malveillante peut effectuer des achats ou transférer de l’argent dans le contexte de l’utilisateur exploité. Dans le cas d’une attaque ciblée sur une application personnalisée de gestion des identités basée sur le Web, il peut permettre à un attaquant de créer ses propres identités, de modifier les autorisations et les droits et de compromettre la compromission du système.  
  
Bien qu’une discussion complète sur les scripts intersites et l’injection SQL ne soit pas abordée dans ce document, le [projet de sécurité d’application Web (OWASP)](https://www.owasp.org/index.php/Main_Page) publie une liste des 10 premiers avec une présentation détaillée des vulnérabilités et des contre-mesures.  
  
Quel que soit l’investissement dans la sécurité de l’infrastructure, si des applications mal conçues et écrites sont déployées au sein de cette infrastructure, l’environnement est rendu vulnérable aux attaques. Même les infrastructures bien sécurisées ne peuvent pas fournir des contre-mesures efficaces à ces attaques d’application. Pour compliquer le problème, les applications mal conçues peuvent exiger que les comptes de service disposent d’autorisations excessives pour que l’application puisse fonctionner.  
  
Le Microsoft Security Development Lifecycle (SDL) est un ensemble de contrôles de processus structurels qui fonctionnent pour améliorer la sécurité dès le début de la collecte des exigences et l’extension du cycle de vie de l’application jusqu’à ce qu’elle soit retirée. Cette intégration de contrôles de sécurité efficaces est non seulement critique du point de vue de la sécurité, mais il est essentiel de s’assurer que la sécurité des applications est coûteuse et planifiée. L’évaluation d’une application pour les problèmes de sécurité lorsqu’il s’agit d’un code complet oblige les organisations à prendre des décisions sur la sécurité des applications uniquement avant ou même après le déploiement de l’application. Une organisation peut choisir de résoudre les défauts de l’application avant de déployer l’application en production, de réduire les coûts et les retards, ou de déployer l’application en production avec des failles de sécurité connues, exposant ainsi la compromission de l’organisation.  
  
Certaines organisations placent le coût total de la résolution d’un problème de sécurité dans le code de production au-dessus de $10 000 par problème, et les applications développées sans SDL efficace peuvent avoir une moyenne de plus de dix problèmes de gravité élevée par 100 000 lignes de code. Dans les grandes applications, les coûts augmentent rapidement. En revanche, de nombreuses entreprises définissent un point de référence de moins d’un problème par 100 000 lignes de code à la phase finale de révision du code du SDL et visent à ne pas avoir de problèmes dans les applications à haut risque en production.  
  
L’implémentation de SDL améliore la sécurité en incluant les exigences de sécurité au début de la collecte des exigences et de la conception d’une application qui fournit la modélisation des menaces pour les applications à haut risque. nécessite une formation et une surveillance efficaces des développeurs. et nécessitent des normes et des pratiques de code claires et cohérentes. L’effet net d’un SDL est l’amélioration significative de la sécurité des applications tout en réduisant le coût de développement, de déploiement, de maintenance et de mise hors service d’une application. Bien qu’une présentation détaillée de la conception et de l’implémentation de SDL n’entre pas dans le cadre de ce document, reportez-vous au [cycle de vie de développement de sécurité Microsoft](https://www.microsoft.com/security/sdl/default.aspx) pour obtenir des instructions et des informations détaillées.  
  


