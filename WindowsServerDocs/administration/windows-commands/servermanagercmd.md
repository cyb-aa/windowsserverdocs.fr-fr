---
title: Servermanagercmd
description: Rubrique relative aux commandes Windows pour * * * *-
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 507c4b87-8e13-4872-8b34-0c7508eecbc1
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: fbc55445c30fe5f29fb416aff5223f35f32a642e
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/08/2020
ms.locfileid: "80834642"
---
# <a name="servermanagercmd"></a>Servermanagercmd

>S’applique à : Windows Server (canal semi-annuel), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

> [!IMPORTANT]
> Cette commande est disponible uniquement sur les serveurs qui exécutent Windows Server 2008 ou Windows Server 2008 R2. **ServerManagerCmd. exe** est déconseillé et n’est pas disponible dans Windows Server 2012. Pour plus d’informations sur la façon d’installer ou de supprimer des rôles, des services de rôle et des fonctionnalités dans Windows Server 2012, consultez [installer ou désinstaller des rôles, des services de rôle et des fonctionnalités](https://go.microsoft.com/fwlink/?LinkID=239563) sur Microsoft TechNet.

Installe et supprime des rôles, des services de rôle et des fonctionnalités. Affiche également la liste de tous les rôles, services de rôle et fonctionnalités disponibles, et indique ceux qui sont installés sur cet ordinateur. Pour plus d’informations sur les rôles, les services de rôle et les fonctionnalités que vous pouvez spécifier à l’aide de cet outil, consultez l' [aide de gestionnaire de serveur](https://go.microsoft.com/fwlink/?LinkID=137387). Pour obtenir des exemples d’utilisation de cette commande, consultez [Exemples](#BKMK_examples).

## <a name="syntax"></a>Syntaxe
```
servermanagercmd -query [[[<Drive>:]<path>]<query.xml>] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -inputpath  [[<Drive>:]<path>]<answer.xml> [-resultpath <result.xml> [-restart] | -whatif] [-logpath [[<Drive>:]<path>]<log.txt>]
servermanagercmd -install <Id> [-allSubFeatures] [-resultpath   [[<Drive>:]<path>]<result.xml> [-restart] | -whatif] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -remove <Id> [-resultpath    <result.xml> [-restart] | -whatif] [-logpath  [[<Drive>:]<path>]<log.txt>]
servermanagercmd [-help | -?]
servermanagercmd -version
```

### <a name="parameters"></a>Paramètres

|                   Paramètre                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  -Query [[[\<lecteur >:]\<chemin >]\<*query. xml*>]   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Affiche la liste de tous les rôles, services de rôle et fonctionnalités installés et disponibles pour l’installation sur le serveur. Vous pouvez également utiliser la forme abrégée de ce paramètre, **-q**. Si vous souhaitez enregistrer les résultats de la requête dans un fichier XML, spécifiez un fichier XML pour remplacer *query. xml*.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| -inputPath < [[\<lecteur >:]\<chemin >]*answer. xml*> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Installe ou supprime les rôles, les services de rôle et les fonctionnalités spécifiés dans un fichier de réponses XML représenté par *answer. xml*. Vous pouvez également utiliser la forme abrégée de ce paramètre, **-p.**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                -installer \<*Id*>                | Installe le rôle, le service de rôle ou la fonctionnalité spécifiés par *ID*. Les identificateurs ne respectent pas la casse. Plusieurs rôles, services de rôle et fonctionnalités doivent être séparés par des espaces. Les paramètres facultatifs suivants sont utilisés avec le paramètre **-install** .<p>-    **-setting** \<*SettingName*>=\<*SettingValue*> spécifie les paramètres requis pour l’installation.<br />-    **-allSubFeatures** spécifie l’installation de tous les services et fonctionnalités subordonnés, ainsi que le rôle parent, le service de rôle ou la fonctionnalité nommée dans la valeur d' *ID* . **Remarque :**     Certains conteneurs de rôles n’ont pas d’identificateur de ligne de commande pour permettre l’installation de tous les services de rôle. C’est le cas lorsque les services de rôle ne peuvent pas être installés dans la même instance de la commande Gestionnaire de serveur. Par exemple, le service de rôle service FS (Federation Service) d’Active Directory Federation Services et le service de rôle proxy FSP (Federation Service Proxy) ne peuvent pas être installés à l’aide de la même instance de commande Gestionnaire de serveur.<br />-    **-resultpath** \<*result. Xml > enregistre les résultats de l’installation dans un fichier xml représenté par \*result. xml*. Vous pouvez également utiliser la forme abrégée de ce paramètre, **-r**. **Remarque :**     Vous ne pouvez pas exécuter **ServerManagerCmd** avec le paramètre **-resultPath** et le paramètre **-WhatIf** spécifiés.<br />-    **-restart** redémarre automatiquement l’ordinateur une fois l’installation terminée (si le redémarrage est requis par les rôles ou les fonctionnalités installés).<br />-    **-WhatIf** affiche toutes les opérations spécifiées pour le paramètre **-install** . Vous pouvez également utiliser la forme abrégée du paramètre **-WhatIf** , **-w**. Vous ne pouvez pas exécuter **ServerManagerCmd** avec le paramètre **-resultPath** et le paramètre **-WhatIf** spécifiés.<br />-    **-logpath** \<[[\<lecteur >:]\<chemin >]*log. txt*> spécifie un nom et un emplacement pour le fichier journal, à l’exception de la valeur par défaut **%windir%\temp\servermanager.log**. |
|                -supprimer l' *ID* de \<>                 |                                                                                                                                                                                                                                                                                                                                                                     Supprime le rôle, le service de rôle ou la fonctionnalité spécifiés par *ID*. Les identificateurs ne respectent pas la casse. Plusieurs rôles, services de rôle et fonctionnalités doivent être séparés par des espaces. Les paramètres facultatifs suivants sont utilisés avec le paramètre **-Remove** .<p>-    **-resultpath** \<[[\<lecteur >:]\<chemin >]*result. xml*> enregistre les résultats de la suppression dans un fichier XML représenté par *result. xml*. Vous pouvez également utiliser la forme abrégée de ce paramètre, **-r**. **Remarque :**     Vous ne pouvez pas exécuter **ServerManagerCmd** avec le paramètre **-resultPath** et le paramètre **-WhatIf** spécifiés.<br />-    **-restart** redémarre automatiquement l’ordinateur lorsque la suppression est terminée (si le redémarrage est requis par les rôles ou fonctionnalités restants).<br />-    **-WhatIf** affiche toutes les opérations spécifiées pour le paramètre **-Remove** . Vous pouvez également utiliser la forme abrégée du paramètre **-WhatIf** , **-w**. Vous ne pouvez pas exécuter **ServerManagerCmd** avec le paramètre **-resultPath** et le paramètre **-WhatIf** spécifiés.<br />-    **-logpath**\<[[\<lecteur >:]\<chemin >]*log. txt*> spécifie un nom et un emplacement pour le fichier journal, à l’exception de la valeur par défaut **%windir%\temp\servermanager.log**.                                                                                                                                                                                                                                                                                                                                                                      |
|                     -aide                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Affiche l’aide dans la fenêtre d’invite de commandes. Vous pouvez également utiliser la forme abrégée, **- ?** .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                    -version                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Affiche le numéro de version du Gestionnaire de serveur. Vous pouvez également utiliser la forme abrégée, **-v**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

## <a name="remarks"></a>Notes
**ServerManagerCmd** est déconseillé et n’est pas forcément pris en charge dans les futures versions de Windows. Si vous exécutez Gestionnaire de serveur sur des ordinateurs qui exécutent Windows Server 2008 R2, nous vous recommandons d’utiliser les applets de commande Windows PowerShell qui sont disponibles pour la Gestionnaire de serveur. Pour plus d’informations, consultez [Gestionnaire de serveur applets](https://go.microsoft.com/fwlink/?LinkID=137653)de commande.
ServerManagerCmd peut être exécuté à partir de n’importe quel répertoire sur les lecteurs locaux du serveur. Vous devez être membre du groupe Administrateurs sur le serveur sur lequel vous souhaitez installer ou supprimer des logiciels.

> [!IMPORTANT]
> En raison des restrictions de sécurité imposées par le contrôle de compte d’utilisateur dans Windows Server 2008 R2, vous devez exécuter **ServerManagerCmd** dans une fenêtre d’invite de commandes ouverte avec des autorisations élevées. Pour ce faire, cliquez avec le bouton droit sur l’exécutable de l’invite de commandes ou l’objet d' **invite de commandes** dans le menu **Démarrer** , puis cliquez sur **exécuter en tant qu’administrateur**.

## <a name="examples"></a><a name=BKMK_examples></a>Illustre
L’exemple suivant montre comment utiliser **ServerManagerCmd** pour afficher une liste de tous les rôles, services de rôle et fonctionnalités disponibles, ainsi que les rôles, services de rôle et fonctionnalités qui sont installés sur l’ordinateur.
```
servermanagercmd -query
```
L’exemple suivant montre comment utiliser **ServerManagerCmd** pour installer le rôle serveur Web (IIS) et enregistrer les résultats de l’installation dans un fichier XML représenté par *installResult. xml*.
```
servermanagercmd -install Web-Server -resultpath installResult.xml
```
L’exemple suivant montre comment utiliser le paramètre **WhatIf** avec **ServerManagerCmd** pour afficher des informations détaillées sur les rôles, les services de rôle et les fonctionnalités qui seraient installés ou supprimés, en fonction des instructions spécifiées dans un fichier de réponses XML représenté par *install. xml*.
```
servermanagercmd -inputpath install.xml -whatif
```

## <a name="additional-references"></a>Références supplémentaires
-   pour obtenir la liste complète des identificateurs de rôle, de service de rôle ou de fonctionnalité que vous pouvez spécifier pour le paramètre *ID* , ou pour plus d’informations sur l’utilisation d’un fichier de réponses XML avec **ServerManagerCmd**, consultez l' [aide de gestionnaire de serveur](https://go.microsoft.com/fwlink/?LinkID=137387). (https://go.microsoft.com/fwlink/?LinkID=137387).
-   Pour obtenir la liste des applets de commande Windows PowerShell disponibles pour Gestionnaire de serveur, consultez [Gestionnaire de serveur applets](https://go.microsoft.com/fwlink/?LinkID=137653) de commande.
-   - [Clé de syntaxe de ligne de commande](command-line-syntax-key.md)
