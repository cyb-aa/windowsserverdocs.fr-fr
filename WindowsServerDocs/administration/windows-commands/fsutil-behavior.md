---
title: Comportement de Fsutil
ms.prod: windows-server
manager: dmoss
ms.author: toklima
author: toklima
ms.technology: storage
audience: IT Pro
ms.topic: article
ms.date: 10/16/2017
ms.assetid: 84eaba2c-c0af-49e1-bbbd-2ed2928e5e4b
ms.openlocfilehash: 82342d278b9a3b921ef302c8dae13bf0d372fa3e
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/08/2020
ms.locfileid: "80844362"
---
# <a name="fsutil-behavior"></a>Comportement de Fsutil

>S’applique à : Windows Server (canal semi-annuel), Windows Server 2016, Windows 10, Windows Server 2012 R2, Windows 8.1, Windows Server 2012, Windows 8, Windows Server 2008 R2, Windows 7

Interroge ou définit le comportement du volume NTFS, notamment :

-   Création de noms de fichiers de longueur de 8,3 caractères

-   Utilisation de caractères étendus dans des noms de fichiers courts de 8,3 caractères sur des volumes NTFS

-   Mise à jour de l’horodatage du dernier accès lorsque les répertoires sont répertoriés sur des volumes NTFS

-   Fréquence à laquelle les événements de quota sont écrits dans le journal système et dans le pool paginé NTFS et les niveaux de cache de mémoire de pool non paginé NTFS

-   Taille de la zone de table de fichiers Master (zone MFT)

-   Suppression silencieuse des données lorsque le système rencontre des dommages sur un volume NTFS.

-   Notification de suppression de fichier (également appelée Trim ou DEMAPPAGE)

Pour obtenir des exemples d’utilisation de cette commande, consultez [Exemples](#BKMK_examples).

## <a name="syntax"></a>Syntaxe

```
fsutil behavior query {allowextchar | bugcheckoncorrupt | disable8dot3 [<VolumePath>] | disablecompression | disablecompressionlimit | disableencryption | disablefilemetadataoptimization | disablelastaccess | disablespotcorruptionhandling | disabletxf | disablewriteautotiering | encryptpagingfile | mftzone | memoryusage | quotanotify | symlinkevaluation | disabledeletenotify}

fsutil behavior set {allowextchar {1|0} | bugcheckoncorrupt {1|0} | disable8dot3 [ <Value> | [<VolumePath> {1|0}] ] | disablecompression {1|0} | disablecompressionlimit {1|0} | disableencryption {1|0} | disablefilemetadataoptimization {1|0} | disablelastaccess {1|0} | disablespotcorruptionhandling {1|0} | disabletxf {1|0} | disablewriteautotiering {1|0} | encryptpagingfile {1|0} | mftzone <Value> | memoryusage <Value> | quotanotify <Frequency> | symlinkevaluation <SymbolicLinkType> | disabledeletenotify {1|0}}
```

### <a name="parameters"></a>Paramètres

|                 Paramètre                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|--------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                   query                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Interroge les paramètres de comportement du système de fichiers.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                    set                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Modifie les paramètres de comportement du système de fichiers.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|          allowextchar {1&#124;0}           |                                                                                                                                                                                                                                                                                                                                                                                                                                  Autorise (**1**) ou interdit (**0**) caractères dans le jeu de caractères étendus (y compris les caractères diacritiques) à utiliser dans des noms de fichiers courts de 8,3 caractères sur des volumes NTFS.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|        Bugcheckoncorrupt {1&#124;0}        |                                                                                                                                                                                                                                                                                                                                                                      Autorise (**1**) ou interdit (**0**) la génération d’une vérification de bogue en cas d’altération sur un volume NTFS. Cette fonctionnalité peut être utilisée pour empêcher NTFS de supprimer silencieusement les données lorsqu’elles sont utilisées avec la fonctionnalité NTFS de réparation automatique.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.<p>Ce paramètre s’applique à : Windows Server 2008 R2 et Windows 7.                                                                                                                                                                                                                                                                                                                                                                      |
|   disable8dot3 [<VolumePath>] {1&#124;0}   |                                                                                                                                                                                                                                                                                                                                                                                                                                                       Désactive (**1**) ou active (**0**) la création de noms de fichiers de longueur de 8,3 caractères sur des volumes FAT et NTFS. Éventuellement, préfixe avec le *VolumePath* spécifié comme nom de lecteur suivi d’un signe deux-points ou d’un GUID.                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|       DisableCompression {1&#124;0}        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Désactive **(1)** ou active **(0)** la compression NTFS.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|     disablecompressionlimit {1&#124;0}     |                                                                                                                                                                                                                                                                                   Désactive **(1)** ou active **(0)** la limite de compression NTFS sur le volume NTFS. Lorsqu’un fichier compressé atteint un certain niveau de fragmentation, au lieu d’éviter l’extension du fichier, NTFS arrête la compression des extensions supplémentaires du fichier. Cela a été fait pour permettre aux fichiers compressés d’être plus volumineux qu’ils ne le seraient normalement. Si cette valeur est définie sur TRUE, cette fonctionnalité est désactivée, ce qui limite la taille des fichiers compressés sur le système. Nous déconseillons de désactiver cette fonctionnalité.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                   |
|        DisableEncryption {1&#124;0}        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Désactive **(1)** ou active **(0)** le chiffrement des dossiers et des fichiers sur les volumes NTFS.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| disablefilemetadataoptimization {1&#124;0} |                                                                                                                                                                                                                                                                                                                      Désactive **(1)** ou active **(0)** l’optimisation des métadonnées de fichier. NTFS limite le nombre d’étendues qu’un fichier donné peut avoir. Les fichiers compressés et les fichiers de remplacement peuvent devenir très fragmentés. Par défaut, NTFS compacte régulièrement ses structures de métadonnées internes pour permettre la fragmentation des fichiers. Si cette valeur est définie sur TRUE, cette optimisation interne est désactivée. Nous déconseillons de désactiver cette fonctionnalité.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                       |
|        disablelastaccess {1&#124;0}        |                                                                                                                                                                                                                                                                                                                                                                                                                                                       Désactive (**1**) ou active (**0**) les mises à jour de l’horodatage du dernier accès dans chaque répertoire lorsque les répertoires sont répertoriés sur un volume NTFS.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|  disablespotcorruptionhandling {1&#124;0}  |                                                                                                                                                                                                                                                                                                                                                    Désactive **(1)** ou active **(0)** la gestion des endommagements ponctuels. L’une des nouvelles fonctionnalités introduites dans Windows 8 et Windows Server 2012 est une nouvelle forme de haute disponibilité de CHKDSK. Cette fonctionnalité permet aux administrateurs système d’exécuter CHKDSK pour analyser l’état d’un volume sans le mettre hors connexion. Nous déconseillons de désactiver cette fonctionnalité.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                    |
|           disabletxf {1&#124;0}            |                                                                                                                                                                                                                                                                                                                                                                         Désactive **(1)** ou active **(0)** TxF sur le volume NTFS spécifié. TxF est une fonctionnalité NTFS qui fournit une transaction comme la sémantique aux opérations du système de fichiers. TxF est actuellement deprected bien que la fonctionnalité soit toujours disponible. Nous vous déconseillons de désactiver cette fonctionnalité sur le volume C :.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                                          |
|     disablewriteautotiering {1&#124;0}     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Désactive la logique de hiérarchisation automatique ReFS v2 pour les volumes hiérarchisés.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|        encryptpagingfile {1&#124;0}        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Chiffre (**1**) ou ne chiffre pas (**0**) le fichier d’échange de mémoire dans le système d’exploitation Windows.<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|              mftzone <Value>               |                                                                                                                                                                                                                                                                                                                                                                                                                                           Définit la taille de la zone MFT et est exprimé sous la forme d’un multiple de 200 Mo d’unités. Affectez un nombre compris entre **1** (la valeur par défaut est 200 Mo) à **4** (la *valeur* maximale est de 800 Mo).<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|            MemoryUsage <Value>             |                                                                                                                                                                                                                                                                                   Configure les niveaux de cache interne de la mémoire NTFS paginée et de la mémoire de pool non paginée NTFS. Défini sur **1** ou **2**. Si la valeur est **1** (valeur par défaut), NTFS utilise la quantité par défaut de mémoire paginée. Si la valeur est définie sur **2**, NTFS augmente la taille de ses listes et de ses seuils de mémoire. (Une liste inversée est un pool de mémoires tampons de mémoire de taille fixe que le noyau et les pilotes de périphérique créent en tant que caches de mémoire privée pour les opérations du système de fichiers, telles que la lecture d’un fichier.)<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                   |
|          quotanotify <Frequency>           |                                                                                                                                                                                                                                                                                                                                                                                                                                  Configure la fréquence à laquelle les violations de quota NTFS sont signalées dans le journal système. Les valeurs valides pour sont comprises entre 0 et 4294967295. La fréquence par défaut est de 3600 secondes (une heure).<p>Vous devez redémarrer votre ordinateur pour que ce paramètre prenne effet.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|    symlinkevaluation <SymbolicLinkType>    |                                                                                                                                                                                                                                                                                                                                                                                                   Contrôle le type des liens symboliques qui peuvent être créés sur un ordinateur. Les choix valides sont les suivants :<p>1. liens symboliques local à local, L2L : {&#124;0 1}<br />2. liens symboliques local à distant, L2R : {&#124;0 1}<br />3. liens symboliques distant à local, R2R : {&#124;0 1}<br />4. liens symboliques distants à distants&#124;, R2L : {0 1}                                                                                                                                                                                                                                                                                                                                                                                                   |
|            DisableDeleteNotify             | Désactive \(**1**\) ou active les notifications de suppression de \(**0**\). La notification de suppression \(également dénommée découpage ou démappage\) est une fonctionnalité qui informe l’unité de stockage sous-jacente des clusters qui ont été libérés en raison d’une opération de suppression de fichier. En outre :<p>-Pour les systèmes utilisant ReFS v2, Trim est désactivé par défaut. S’applique à Windows Server 2016.<br />-Pour les systèmes utilisant ReFS v1, Trim est activé par défaut. S’applique à Windows Server 2012, Windows Server 2012 R2 et Windows Server 2016.<br />-Pour les systèmes utilisant NTFS, Trim est activé par défaut, sauf si un administrateur le désactive.<br />-Si votre lecteur de disque dur ou votre réseau de stockage signale qu’il ne prend pas en charge la suppression, votre disque dur et vos réseaux San n’obtiennent pas de notifications de suppression.<br />-L’activation ou la désactivation de ne nécessite pas de redémarrage.<br />-La suppression est effective lors de l’émission de la commande de démappage suivante.<br />-Les e/s en cours existantes ne sont pas affectées par la modification du Registre.<br />-Ne nécessite pas de redémarrage du service lorsque vous activez ou désactivez Trim.<p>Ce paramètre a été introduit dans Windows Server 2008 R2 et Windows 7. |

## <a name="remarks"></a>Notes

-   La zone MFT est une zone réservée qui permet à la table de fichiers maîtres (MFT) de se développer autant que nécessaire pour empêcher la fragmentation de la MFT. Si la taille moyenne du fichier sur le volume est inférieure ou égale à 2 Ko, il peut être bénéfique de définir la valeur **mftzone** sur 2. Si la taille moyenne du fichier sur le volume est inférieure ou égale à 1 Ko, il peut être bénéfique de définir la valeur **mftzone** sur 4.

-   Quand **disable8dot3** a la valeur **0**, chaque fois que vous créez un fichier avec un nom de fichier long, NTFS crée une deuxième entrée de fichier qui a un nom de fichier de longueur 8,3 caractères. Lorsque NTFS crée des fichiers dans un répertoire, il doit rechercher les noms de fichiers de 8,3 caractères qui sont associés aux noms de fichiers longs. Ce paramètre met à jour la clé de Registre **HKLM\SYSTEM\CurrentControlSet\Control\FileSystem\NtfsDisable8dot3NameCreation** .

-   Le paramètre **allowextchar** met à jour la clé de Registre **HKLM\SYSTEM\CurrentControlSet\Control\FileSystem\NtfsAllowExtendedCharacterIn8dot3Name** .

-   Le paramètre **disablelastaccess** réduit l’impact de la journalisation des mises à jour vers l’horodatage du dernier accès sur les fichiers et les répertoires. La désactivation de la fonctionnalité **heure du dernier accès** améliore la vitesse d’accès aux fichiers et aux répertoires. Ce paramètre met à jour la clé de Registre **HKLM\SYSTEM\CurrentControlSet\Control\FileSystem\NtfsDisableLastAccessUpdate** .

    Remarques :

    -   Les requêtes d' **heure de dernier accès** basées sur un fichier sont précises, même si toutes les valeurs sur disque ne sont pas actuelles. NTFS retourne la valeur correcte sur les requêtes, car la valeur exacte est stockée en mémoire.

    -   Une heure correspond à la durée maximale pendant laquelle NTFS diffère la mise à jour de l' **heure de dernier accès** sur le disque. Si NTFS met à jour d’autres attributs de fichier tels que l’heure de la dernière **modification**et qu’une mise à jour de **l’heure du dernier accès** est en attente, NTFS met à jour l' **heure du dernier accès** avec les autres mises à jour sans incidence sur les performances.

    -   Le paramètre **disablelastaccess** peut affecter des programmes tels que la sauvegarde et le stockage étendu qui reposent sur cette fonctionnalité.

-   L’augmentation de la mémoire physique n’augmente pas toujours la quantité de mémoire de réserve paginée disponible pour NTFS. La définition de **MemoryUsage** sur la valeur **2** augmente la limite de la mémoire de réserve paginée. Cela peut améliorer les performances si votre système ouvre et ferme de nombreux fichiers dans le même jeu de fichiers et n’utilise pas déjà de grandes quantités de mémoire système pour d’autres applications ou pour la mémoire cache. Si votre ordinateur utilise déjà de grandes quantités de mémoire système pour d’autres applications ou pour la mémoire cache, le fait d’augmenter la limite de mémoire de pool paginée et non paginée NTFS réduit la mémoire de pool disponible pour d’autres processus. Cela peut réduire les performances globales du système. Ce paramètre met à jour la clé de Registre **HKLM\SYSTEM\CurrentControlSet\Control\FileSystem\NtfsMemoryUsage** .

-   La valeur spécifiée dans le paramètre **mftzone** est une approximation de la taille initiale de la table MFT plus la zone MFT sur un nouveau volume, et elle est définie au moment du montage pour chaque système de fichiers. À mesure que l’espace sur le volume est utilisé, NTFS ajuste l’espace réservé à la croissance future de la MFT. Si la zone MFT est déjà volumineuse, la taille complète de la zone MFT n’est pas réservée. Étant donné que la zone MFT est basée sur la plage contiguë au-delà de la fin de la table MFT, elle diminue à mesure que l’espace est utilisé.

    Le système de fichiers ne détermine pas le nouvel emplacement de la zone MFT tant que la zone MFT active n’est pas complètement utilisée. Notez que cela ne se produit jamais sur un système classique.

-   Certains appareils peuvent subir une dégradation des performances lorsque la fonctionnalité de notification de suppression est activée. Dans ce cas, utilisez l’option **disabledeletenotify** pour désactiver la fonctionnalité de notification.

### <a name="examples"></a><a name="BKMK_examples"></a>Illustre
Pour rechercher le comportement de désactivation du nom 8dot3 pour un volume de disque spécifié avec le GUID {928842df-5A01-11de-a85c-806e6f6e6963}, tapez :

```
fsutil behavior query disable8dot3 Volume{928842df-5a01-11de-a85c-806e6f6e6963}
```

Vous pouvez également interroger le comportement de nom 8dot3 à l’aide de la sous-commande **8dot3name** .

Pour interroger le système afin de déterminer si TRIM est activé ou non, tapez :

```
fsutil behavior query DisableDeleteNotify
```
Cela génère une sortie similaire à celle-ci :

    NTFS DisableDeleteNotify = 1
    ReFS DisableDeleteNotify is not currently set

Pour remplacer le comportement par défaut pour TRIM \(disabledeletenotify\) pour ReFS v2, tapez :

```
fsutil behavior set DisableDeleteNotify ReFS 0
```

Pour remplacer le comportement par défaut pour TRIM \(disabledeletenotify\) pour NTFS et ReFS v1, tapez :
```
fsutil behavior set DisableDeleteNotify 1
```

## <a name="additional-references"></a>Références supplémentaires
- [Clé de syntaxe de ligne de commande](command-line-syntax-key.md)

[Fsutil](Fsutil.md)

[Fsutil 8dot3name](Fsutil-8dot3name.md)


